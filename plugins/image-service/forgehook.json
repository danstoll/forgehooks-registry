{
  "$schema": "../../forgehook-schema.json",
  "id": "image-service",
  "name": "Image Service",
  "version": "1.1.0",
  "description": "Image processing operations including resize, crop, rotate, filters, format conversion, and metadata extraction",
  "author": {
    "name": "FlowForge",
    "url": "https://flowforge.dev"
  },
  "license": "MIT",
  "repository": "https://github.com/flowforge/image-service",
  "icon": "image",
  "category": "media",
  "tags": ["image", "processing", "resize", "crop", "filter", "convert", "thumbnail"],
  
  "image": {
    "repository": "flowforge/image-service",
    "tag": "1.0.0"
  },
  
  "port": 4005,
  "basePath": "/api/v1/image",
  
  "healthCheck": {
    "path": "/health",
    "interval": 30,
    "timeout": 10,
    "retries": 3
  },
  
  "endpoints": [
    {
      "method": "POST",
      "path": "/resize",
      "description": "Resize an image to specified dimensions",
      "requestBody": {
        "image": "base64-encoded-image",
        "width": 800,
        "height": 600,
        "fit": "cover"
      }
    },
    {
      "method": "POST",
      "path": "/crop",
      "description": "Crop an image to specified region",
      "requestBody": {
        "image": "base64-encoded-image",
        "x": 0,
        "y": 0,
        "width": 400,
        "height": 300
      }
    },
    {
      "method": "POST",
      "path": "/rotate",
      "description": "Rotate an image by specified degrees",
      "requestBody": {
        "image": "base64-encoded-image",
        "angle": 90
      }
    },
    {
      "method": "POST",
      "path": "/filter",
      "description": "Apply filters (grayscale, blur, sharpen, etc.)",
      "requestBody": {
        "image": "base64-encoded-image",
        "filter": "grayscale",
        "options": {}
      }
    },
    {
      "method": "POST",
      "path": "/convert",
      "description": "Convert image format (png, jpg, webp, avif)",
      "requestBody": {
        "image": "base64-encoded-image",
        "format": "webp",
        "quality": 85
      }
    },
    {
      "method": "POST",
      "path": "/thumbnail",
      "description": "Generate thumbnail with smart cropping",
      "requestBody": {
        "image": "base64-encoded-image",
        "width": 200,
        "height": 200
      }
    },
    {
      "method": "POST",
      "path": "/metadata",
      "description": "Extract image metadata (EXIF, dimensions, etc.)",
      "requestBody": {
        "image": "base64-encoded-image"
      }
    },
    {
      "method": "POST",
      "path": "/optimize",
      "description": "Optimize image for web (reduce file size)",
      "requestBody": {
        "image": "base64-encoded-image",
        "quality": 80
      }
    },
    {
      "method": "GET",
      "path": "/health",
      "description": "Health check endpoint",
      "authentication": false
    }
  ],
  
  "environment": [
    {
      "name": "LOG_LEVEL",
      "description": "Logging verbosity level",
      "default": "info",
      "required": false
    },
    {
      "name": "IMAGE_MAX_SIZE_MB",
      "description": "Maximum image file size in MB",
      "default": "50",
      "required": false
    },
    {
      "name": "MAX_DIMENSION",
      "description": "Maximum image dimension (width/height)",
      "default": "10000",
      "required": false
    }
  ],
  
  "dependencies": {
    "services": ["redis"]
  },
  
  "resources": {
    "memory": "512m",
    "cpu": "1.0"
  }
}
